{"version":3,"file":"SelectMenu.js","sourceRoot":"","sources":["../src/SelectMenu.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,UAAU,MAAM,4CAA4C,CAAC;AACpE,OAAO,aAAa,MAAM,0DAA0D,CAAC;AACrF,OAAO,OAAO,MAAM,+CAA+C,CAAC;AACpE,OAAO,IAAI,MAAM,iDAAiD,CAAC;AACnE,OAAO,KAAK,MAAM,kDAAkD,CAAC;AACrE,OAAO,QAAQ,MAAM,qDAAqD,CAAC;AAC3E,OAAO,SAAS,MAAM,sDAAsD,CAAC;AAC7E,OAAO,UAAU,MAAM,kDAAkD,CAAC;AAC1E,OAAO,EAAE,OAAO,EAAE,MAAM,wCAAwC,CAAC;AAEjE,WAAW;AACX,OAAO,kBAAkB,MAAM,iDAAiD,CAAC;AAEjF,SAAS;AACT,OAAO,aAAa,MAAM,sCAAsC,CAAC;AACjE,OAAO,oBAAoB,MAAM,6CAA6C,CAAC;AAC/E,OAAO,0BAA0B,MAAM,mDAAmD,CAAC;AAE3F,OAAO;AACP,OAAO,iBAAiB,MAAM,wBAAwB,CAAC;AACvD,OAAO,IAAI,MAAM,WAAW,CAAC;AAC7B,OAAO,MAAM,MAAM,aAAa,CAAC;AAiBjC;;;;;;;;;;;;;;;;;;;;;;;;GAwBG;AA2BH,IAAM,UAAU,GAAhB,MAAM,UAAW,SAAQ,UAAU;IAClC;QACC,KAAK,EAAE,CAAC;QAER,IAAI,CAAC,qBAAqB,GAAG,EAAE,CAAC;IACjC,CAAC;IA4CD;;OAEG;IACH,MAAM,CAAC,MAAc,EAAE,WAAmB;QACzC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,MAAM,CAAC;QACjC,IAAI,CAAC,aAAa,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC;QAC5C,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,CAAC;QACjE,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC;QAC5C,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,qBAAqB,CAAC;QAC1D,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;QAEpC,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,gBAAgB,CAAC;IACjD,CAAC;IAED;;OAEG;IACH,KAAK,CAAC,UAAU,GAAG,KAAK,EAAE,qBAAqB,GAAG,KAAK,EAAE,mBAAmB,GAAG,KAAK;QACnF,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,UAAU,EAAE,qBAAqB,EAAE,mBAAmB,CAAC,CAAC;IAChF,CAAC;IAED,iBAAiB;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;IACvB,CAAC;IAED,cAAc;QACb,IAAI,uBAAuB,GAAG,CAAC,CAAC,EAC/B,uBAAuB,GAAG,CAAC,CAAC,EAC5B,IAAI,EACJ,aAAa,CAAC;QACf,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAC7B,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE;YAC9B,IAAI,GAAG,CAAC,QAAQ,EAAE;gBACjB,uBAAuB,GAAG,KAAK,CAAC;aAChC;YACD,IAAI,uBAAuB,KAAK,CAAC,CAAC,EAAE;gBACnC,uBAAuB,GAAG,KAAK,CAAC;aAChC;YAED,GAAG,CAAC,QAAQ,GAAG,KAAK,CAAC;YACrB,GAAG,CAAC,OAAO,GAAG,KAAK,CAAC;YACpB,OAAO,GAAG,CAAC;QACZ,CAAC,CAAC,CAAC;QAEH,IAAI,uBAAuB,GAAG,CAAC,CAAC,EAAE;YACjC,MAAM,kBAAkB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;YAC5D,kBAAkB,CAAC,QAAQ,GAAG,IAAI,CAAC;YACnC,kBAAkB,CAAC,OAAO,GAAG,IAAI,CAAC;YAClC,IAAI,GAAG,kBAAkB,CAAC,WAAW,IAAI,MAAM,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;YAChF,aAAa,GAAG,uBAAuB,CAAC;SACxC;aAAM;YACN,IAAI,GAAG,EAAE,CAAC;YACV,aAAa,GAAG,CAAC,CAAC,CAAC;YACnB,MAAM,mBAAmB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;YAC7D,IAAI,mBAAmB,EAAE;gBACxB,mBAAmB,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACpC,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC;gBACnC,aAAa,GAAG,uBAAuB,CAAC;gBACxC,IAAI,GAAG,mBAAmB,CAAC,WAAW,IAAI,MAAM,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAAC;aAClF;SACD;QAED,IAAI,CAAC,SAAS,CAAmB,aAAa,EAAE;YAC/C,IAAI;YACJ,aAAa;SACb,CAAC,CAAC;IACJ,CAAC;IAED,cAAc,CAAC,CAAc;QAC5B,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;QAC7B,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,KAAK,OAAO,CAAC,IAAI,CAAC,CAAC;QAEpF,IAAI,CAAC,SAAS,CAAwB,cAAc,EAAE;YACrD,MAAM;YACN,WAAW;SACX,CAAC,CAAC;IACJ,CAAC;IAED,aAAa;QACZ,IAAI,CAAC,SAAS,CAAc,aAAa,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IACrE,CAAC;IAED,YAAY;QACX,IAAI,CAAC,SAAS,CAAc,YAAY,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IACpE,CAAC;IAED,aAAa;QACZ,IAAI,CAAC,SAAS,CAAc,aAAa,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;IACrE,CAAC;IAED,gBAAgB;QACf,IAAI,CAAC,KAAK,EAAE,CAAC;IACd,CAAC;IAED,IAAI,IAAI;QACP,OAAO,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC;IACjC,CAAC;IAED,IAAI,WAAW;QACd,OAAO,IAAI,CAAC,UAAW,CAAC,aAAa,CAAoB,kBAAkB,CAAE,CAAC;IAC/E,CAAC;IAED,IAAI,OAAO;QACV,OAAO;YACN,iBAAiB,EAAE;gBAClB,4BAA4B,EAAE,IAAI;gBAClC,gCAAgC,EAAE,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,OAAO;gBACxE,8BAA8B,EAAE,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,KAAK;gBACpE,gCAAgC,EAAE,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,OAAO;gBACxE,oCAAoC,EAAE,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,WAAW;aAChF;YACD,OAAO,EAAE;gBACR,+BAA+B,EAAE,IAAI,CAAC,aAAa;aACnD;SACD,CAAC;IACH,CAAC;IAED,IAAI,MAAM;QACT,OAAO;YACN,iBAAiB,EAAE;gBAClB,OAAO,EAAE,GAAG,IAAI,CAAC,WAAY,IAAI;aACjC;YACD,iBAAiB,EAAE;gBAClB,WAAW,EAAE,GAAG,IAAI,CAAC,WAAY,IAAI;aACrC;SACD,CAAC;IACH,CAAC;IAED,IAAI,2BAA2B;QAC9B,MAAM,iBAAiB,GAAG;YACzB,KAAK,EAAE,OAAO;YACd,OAAO,EAAE,OAAO;YAChB,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,aAAa;SAC1B,CAAC;QAEF,OAAO,IAAI,CAAC,UAAU,KAAK,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACtF,CAAC;IAED,IAAI,QAAQ;QACX,OAAO,OAAO,EAAE,CAAC;IAClB,CAAC;CACD,CAAA;AAjLA;IALC,IAAI,CAAC;QACL,SAAS,EAAE,IAAI;QACf,IAAI,EAAE,WAAW;QACjB,uBAAuB,EAAE,IAAI;KAC7B,CAAC;2CACuB;AAOzB;IADC,QAAQ,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC;+CACZ;AAGrB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;iDACJ;AAGxB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC;qDACA;AAG5B;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,UAAU,EAAE,YAAY,EAAE,UAAU,CAAC,IAAI,EAAE,CAAC;8CACjC;AAG7B;IADC,QAAQ,EAAE;kDACa;AAGxB;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;yCAC/B;AAGf;IADC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;4CAC5B;AAzCb,UAAU;IA1Bf,aAAa,CAAC;QACd,GAAG,EAAE,iBAAiB;QACtB,QAAQ,EAAE,SAAS;QACnB,MAAM,EAAE,CAAC,aAAa,EAAE,oBAAoB,EAAE,0BAA0B,CAAC;QACzE,QAAQ,EAAE,kBAAkB;QAC5B,YAAY,EAAE;YACb,iBAAiB;YACjB,IAAI;YACJ,MAAM;SACN;KACD,CAAC;IACD,KAAK,CAAwB,cAAc,EAAE;QAC7C,MAAM,EAAE;YACP,MAAM,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE;YAC7B,WAAW,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;SAC9B;KACD,CAAC;IACD,KAAK,CAAC,aAAa,CAAC;IACpB,KAAK,CAAC,YAAY,CAAC;IACnB,KAAK,CAAC,aAAa,CAAC;IACpB,KAAK,CAAmB,aAAa,EAAE;QACvC,MAAM,EAAE;YACP,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE;YACtB,aAAa,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE;SAChC;KACD,CAAC;GACI,UAAU,CAiMf;AAED,UAAU,CAAC,MAAM,EAAE,CAAC;AAEpB,eAAe,UAAU,CAAC","sourcesContent":["import UI5Element from \"@ui5/webcomponents-base/dist/UI5Element.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport Integer from \"@ui5/webcomponents-base/dist/types/Integer.js\";\nimport slot from \"@ui5/webcomponents-base/dist/decorators/slot.js\";\nimport event from \"@ui5/webcomponents-base/dist/decorators/event.js\";\nimport property from \"@ui5/webcomponents-base/dist/decorators/property.js\";\nimport litRender from \"@ui5/webcomponents-base/dist/renderer/LitRenderer.js\";\nimport ValueState from \"@ui5/webcomponents-base/dist/types/ValueState.js\";\nimport { isPhone } from \"@ui5/webcomponents-base/dist/Device.js\";\n\n// Template\nimport SelectMenuTemplate from \"./generated/templates/SelectMenuTemplate.lit.js\";\n\n// Styles\nimport SelectMenuCss from \"./generated/themes/SelectMenu.css.js\";\nimport ValueStateMessageCss from \"./generated/themes/ValueStateMessage.css.js\";\nimport ResponsivePopoverCommonCss from \"./generated/themes/ResponsivePopoverCommon.css.js\";\n\n// Deps\nimport ResponsivePopover from \"./ResponsivePopover.js\";\nimport List from \"./List.js\";\nimport Button from \"./Button.js\";\n\n// Types\nimport type Select from \"./Select.js\";\nimport type SelectMenuOption from \"./SelectMenuOption.js\";\nimport type { IOption } from \"./Select.js\";\n\ntype SelectMenuOptionClick = {\n\toption: SelectMenuOption,\n\toptionIndex: number,\n};\n\ntype SelectMenuChange = {\n\ttext: string,\n\tselectedIndex: number,\n};\n\n/**\n * @class\n *\n * ### Overview\n *\n * The `ui5-select-menu` is meant to be used together with the `ui5-select` component as alternative\n * to define the select's dropdown. It acts as a popover on desktop and tablet, and as a Dialog on phone.\n *\n * The component gives the possibility to the user to customize the `ui5-select`'s dropdown\n * by slotting custom options and adding custom styles.\n *\n * ### Usage\n *\n * To use `ui5-select` with a `ui5-select-menu`,\n * you need to set the `ui5-select` `menu` property to reference `ui5-select-menu` either by ID or DOM reference.\n *\n * For the `ui5-select-menu`\n * ### ES6 Module Import\n *\n * `import @ui5/webcomponents/dist/SelectMenu.js\";`\n * @constructor\n * @extends UI5Element\n * @public\n * @since 1.17.0\n */\n@customElement({\n\ttag: \"ui5-select-menu\",\n\trenderer: litRender,\n\tstyles: [SelectMenuCss, ValueStateMessageCss, ResponsivePopoverCommonCss],\n\ttemplate: SelectMenuTemplate,\n\tdependencies: [\n\t\tResponsivePopover,\n\t\tList,\n\t\tButton,\n\t],\n})\n@event<SelectMenuOptionClick>(\"option-click\", {\n\tdetail: {\n\t\toption: { type: HTMLElement },\n\t\toptionIndex: { type: Integer },\n\t},\n})\n@event(\"before-open\")\n@event(\"after-open\")\n@event(\"after-close\")\n@event<SelectMenuChange>(\"menu-change\", {\n\tdetail: {\n\t\ttext: { type: String },\n\t\tselectedIndex: { type: Integer },\n\t},\n})\nclass SelectMenu extends UI5Element {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.valueStateMessageText = [];\n\t}\n\n\t/**\n\t * Defines the options of the component.\n\t * @public\n\t */\n\t@slot({\n\t\t\"default\": true,\n\t\ttype: HTMLElement,\n\t\tinvalidateOnChildChange: true,\n\t})\n\toptions!: Array<IOption>;\n\n\t/**\n\t * Defines the width of the component.\n\t * @private\n\t */\n\t@property({ validator: Integer })\n\tselectWidth?: number;\n\n\t@property({ type: Boolean })\n\thasValueState!: boolean;\n\n\t@property({ type: Boolean })\n\thasValueStateSlot!: boolean;\n\n\t@property({ type: ValueState, defaultValue: ValueState.None })\n\tvalueState!: `${ValueState}`;\n\n\t@property()\n\tvalueStateText!: string;\n\n\t@property({ type: String, noAttribute: true })\n\tvalue!: string;\n\n\t@property({ type: String, noAttribute: true })\n\tselectId?: string;\n\n\tvalueStateMessageText: Array<Node>;\n\n\t_headerTitleText?: string;\n\n\tselect?: Select;\n\n\t/**\n\t * Shows the dropdown at the given element.\n\t */\n\tshowAt(opener: Select, openerWidth: number) {\n\t\tthis.selectWidth = openerWidth;\n\t\tthis.respPopover.open = true;\n\t\tthis.respPopover.opener = opener;\n\t\tthis.hasValueState = !!opener.hasValueState;\n\t\tthis.hasValueStateSlot = opener.valueStateMessageText.length > 0;\n\t\tthis.valueStateText = opener.valueStateText;\n\t\tthis.valueStateMessageText = opener.valueStateMessageText;\n\t\tthis.valueState = opener.valueState;\n\n\t\tthis._headerTitleText = opener._headerTitleText;\n\t}\n\n\t/**\n\t * Closes the dropdown.\n\t */\n\tclose(escPressed = false, preventRegistryUpdate = false, preventFocusRestore = false) {\n\t\tthis.respPopover.close(escPressed, preventRegistryUpdate, preventFocusRestore);\n\t}\n\n\tonBeforeRendering() {\n\t\tthis._syncSelection();\n\t}\n\n\t_syncSelection() {\n\t\tlet lastSelectedOptionIndex = -1,\n\t\t\tfirstEnabledOptionIndex = -1,\n\t\t\ttext,\n\t\t\tselectedIndex;\n\t\tconst options = this.options;\n\t\toptions.forEach((opt, index) => {\n\t\t\tif (opt.selected) {\n\t\t\t\tlastSelectedOptionIndex = index;\n\t\t\t}\n\t\t\tif (firstEnabledOptionIndex === -1) {\n\t\t\t\tfirstEnabledOptionIndex = index;\n\t\t\t}\n\n\t\t\topt.selected = false;\n\t\t\topt.focused = false;\n\t\t\treturn opt;\n\t\t});\n\n\t\tif (lastSelectedOptionIndex > -1) {\n\t\t\tconst lastSelectedOption = options[lastSelectedOptionIndex];\n\t\t\tlastSelectedOption.selected = true;\n\t\t\tlastSelectedOption.focused = true;\n\t\t\ttext = lastSelectedOption.displayText || String(lastSelectedOption.textContent);\n\t\t\tselectedIndex = lastSelectedOptionIndex;\n\t\t} else {\n\t\t\ttext = \"\";\n\t\t\tselectedIndex = -1;\n\t\t\tconst firstSelectedOption = options[firstEnabledOptionIndex];\n\t\t\tif (firstSelectedOption) {\n\t\t\t\tfirstSelectedOption.selected = true;\n\t\t\t\tfirstSelectedOption.focused = true;\n\t\t\t\tselectedIndex = firstEnabledOptionIndex;\n\t\t\t\ttext = firstSelectedOption.displayText || String(firstSelectedOption.textContent);\n\t\t\t}\n\t\t}\n\n\t\tthis.fireEvent<SelectMenuChange>(\"menu-change\", {\n\t\t\ttext,\n\t\t\tselectedIndex,\n\t\t});\n\t}\n\n\t_onOptionClick(e: CustomEvent) {\n\t\tconst option = e.detail.item;\n\t\tconst optionIndex = this.options.findIndex(_option => option.__id === _option.__id);\n\n\t\tthis.fireEvent<SelectMenuOptionClick>(\"option-click\", {\n\t\t\toption,\n\t\t\toptionIndex,\n\t\t});\n\t}\n\n\t_onBeforeOpen() {\n\t\tthis.fireEvent<CustomEvent>(\"before-open\", undefined, false, false);\n\t}\n\n\t_onAfterOpen() {\n\t\tthis.fireEvent<CustomEvent>(\"after-open\", undefined, false, false);\n\t}\n\n\t_onAfterClose() {\n\t\tthis.fireEvent<CustomEvent>(\"after-close\", undefined, false, false);\n\t}\n\n\t_onCloseBtnClick() {\n\t\tthis.close();\n\t}\n\n\tget open() {\n\t\treturn !!this.respPopover?.open;\n\t}\n\n\tget respPopover() {\n\t\treturn this.shadowRoot!.querySelector<ResponsivePopover>(\".ui5-select-menu\")!;\n\t}\n\n\tget classes() {\n\t\treturn {\n\t\t\tpopoverValueState: {\n\t\t\t\t\"ui5-valuestatemessage-root\": true,\n\t\t\t\t\"ui5-valuestatemessage--success\": this.valueState === ValueState.Success,\n\t\t\t\t\"ui5-valuestatemessage--error\": this.valueState === ValueState.Error,\n\t\t\t\t\"ui5-valuestatemessage--warning\": this.valueState === ValueState.Warning,\n\t\t\t\t\"ui5-valuestatemessage--information\": this.valueState === ValueState.Information,\n\t\t\t},\n\t\t\tpopover: {\n\t\t\t\t\"ui5-select-popover-valuestate\": this.hasValueState,\n\t\t\t},\n\t\t};\n\t}\n\n\tget styles() {\n\t\treturn {\n\t\t\tvalueStatePopover: {\n\t\t\t\t\"width\": `${this.selectWidth!}px`,\n\t\t\t},\n\t\t\tresponsivePopover: {\n\t\t\t\t\"min-width\": `${this.selectWidth!}px`,\n\t\t\t},\n\t\t};\n\t}\n\n\tget _valueStateMessageInputIcon() {\n\t\tconst iconPerValueState = {\n\t\t\tError: \"error\",\n\t\t\tWarning: \"alert\",\n\t\t\tSuccess: \"sys-enter-2\",\n\t\t\tInformation: \"information\",\n\t\t};\n\n\t\treturn this.valueState !== ValueState.None ? iconPerValueState[this.valueState] : \"\";\n\t}\n\n\tget _isPhone() {\n\t\treturn isPhone();\n\t}\n}\n\nSelectMenu.define();\n\nexport default SelectMenu;\nexport type {\n\tSelectMenuOptionClick,\n\tSelectMenuChange,\n};\n"]}